<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUMINA | Media Engine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* –®—Ä–∏—Ñ—Ç Inter –¥–ª—è —Å—Ç—Ä–æ–≥–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');
        
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #09090b; }
        ::-webkit-scrollbar-thumb { background: #27272a; border-radius: 3px; }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –º–∏–≥–∞—é—â–µ–≥–æ –∫—É—Ä—Å–æ—Ä–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ */
        .blink { animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }

        /* –≠—Ñ—Ñ–µ–∫—Ç —à—É–º–∞ –Ω–∞ —Ñ–æ–Ω–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
        .bg-noise {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
        }

        /* –Ø–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å */
        .lang-selector {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 50;
        }

        .lang-btn {
            background: #27272a;
            border: 1px solid #3f3f46;
            color: #a1a1aa;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .lang-btn:hover {
            background: #3f3f46;
            color: #fff;
        }

        .lang-menu {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: #1a1a1a;
            border: 1px solid #3f3f46;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            min-width: 120px;
        }

        .lang-menu.show {
            display: block;
        }

        .lang-option {
            display: block;
            width: 100%;
            padding: 0.75rem 1rem;
            text-align: left;
            background: none;
            border: none;
            color: #a1a1aa;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.2s;
        }

        .lang-option:hover {
            background: #27272a;
            color: #fff;
        }

        .lang-option.active {
            background: #27272a;
            color: #10b981;
        }
    </style>
</head>
<body class="bg-zinc-950 text-zinc-300 min-h-screen flex flex-col items-center justify-center p-4 relative overflow-hidden">
    
    <!-- –Ø–∑—ã–∫–æ–≤–æ–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å -->
    <div class="lang-selector">
        <button id="langToggle" class="lang-btn flex items-center gap-1">
            <i data-lucide="globe" class="h-4 w-4"></i>
            <span id="currentLang">RU</span>
        </button>
        <div id="langMenu" class="lang-menu">
            <button class="lang-option" data-lang="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</button>
            <button class="lang-option" data-lang="en">üá¨üáß English</button>
            <button class="lang-option" data-lang="es">üá™üá∏ Espa√±ol</button>
            <button class="lang-option" data-lang="de">üá©üá™ Deutsch</button>
            <button class="lang-option" data-lang="fr">üá´üá∑ Fran√ßais</button>
        </div>
    </div>
    
    <div class="absolute inset-0 bg-noise pointer-events-none z-0"></div>

    <main class="w-full max-w-2xl z-10 space-y-6">
        
        <div class="flex items-end justify-between border-b border-zinc-800 pb-4">
            <div>
                <h1 class="text-3xl font-bold text-white tracking-tight flex items-center gap-2">
                    LUMINA
                    <span class="text-xs font-mono bg-zinc-900 text-zinc-500 px-2 py-0.5 rounded border border-zinc-800">v2.4.0</span>
                </h1>
                <p class="text-sm text-zinc-500 mt-1" data-i18n="subtitle">Universal Media Extraction Engine</p>
            </div>
            <div class="flex items-center gap-2 text-xs font-mono text-emerald-500 bg-emerald-500/10 px-3 py-1 rounded-full border border-emerald-500/20">
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                </span>
                <span data-i18n="system_online">SYSTEM ONLINE</span>
            </div>
        </div>

        <div class="bg-zinc-900/50 backdrop-blur-sm border border-zinc-800 rounded-xl p-1 shadow-2xl">
            <div class="bg-zinc-900 border border-zinc-800/50 rounded-lg p-6 space-y-6">
                
                <div class="relative group">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <i data-lucide="link" class="h-5 w-5 text-zinc-500 group-focus-within:text-white transition-colors"></i>
                    </div>
                    <input type="text" id="urlInput" 
                        class="block w-full pl-12 pr-4 py-4 bg-zinc-950 border border-zinc-800 rounded-lg text-white placeholder-zinc-600 focus:ring-2 focus:ring-zinc-700 focus:border-zinc-700 outline-none transition-all font-mono text-sm"
                        data-i18n-placeholder="paste_url" autocomplete="off">
                    
                    <button id="clearBtn" class="absolute inset-y-0 right-0 pr-4 hidden hover:text-white text-zinc-600 transition">
                        <i data-lucide="x" class="h-4 w-4"></i>
                    </button>
                </div>

                <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
                    <div class="space-y-2">
                        <label class="text-[10px] uppercase tracking-wider text-zinc-500 font-bold">Format</label>
                        <select class="w-full bg-zinc-950 border border-zinc-800 text-zinc-300 text-xs rounded p-2 focus:border-zinc-600 outline-none cursor-pointer hover:bg-zinc-900 transition">
                            <option>MP4 (Video)</option>
                            <option>MP3 (Audio)</option>
                            <option>WEBM</option>
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] uppercase tracking-wider text-zinc-500 font-bold">Quality</label>
                        <select class="w-full bg-zinc-950 border border-zinc-800 text-zinc-300 text-xs rounded p-2 focus:border-zinc-600 outline-none cursor-pointer hover:bg-zinc-900 transition">
                            <option>Best Available</option>
                            <option>1080p</option>
                            <option>720p</option>
                            <option>480p</option>
                        </select>
                    </div>
                     <div class="space-y-2">
                        <label class="text-[10px] uppercase tracking-wider text-zinc-500 font-bold">Codec</label>
                        <div class="flex items-center justify-between bg-zinc-950 border border-zinc-800 rounded p-2 text-xs">
                            <span class="text-zinc-400">h.264</span>
                            <div class="h-2 w-2 rounded-full bg-zinc-700"></div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <label class="text-[10px] uppercase tracking-wider text-zinc-500 font-bold">Mode</label>
                        <div class="flex items-center justify-between bg-zinc-950 border border-zinc-800 rounded p-2 text-xs hover:border-zinc-600 cursor-pointer transition group">
                            <span class="group-hover:text-white transition">Fast</span>
                            <i data-lucide="zap" class="h-3 w-3 text-yellow-500"></i>
                        </div>
                    </div>
                </div>

                <button onclick="startProcess()" id="dlBtn" class="w-full bg-white text-black font-bold py-4 rounded-lg hover:bg-zinc-200 active:scale-[0.99] transition-all flex items-center justify-center gap-2">
                    <i data-lucide="download" class="h-5 w-5"></i>
                    <span>Initialize Download</span>
                </button>
            </div>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–∏–¥–µ–æ -->
        <div id="mediaCard" class="hidden bg-zinc-900/50 backdrop-blur-sm border border-zinc-800 rounded-xl overflow-hidden shadow-2xl">
            <div class="aspect-video bg-zinc-950 overflow-hidden">
                <img id="mediaThumbnail" src="" alt="Media preview" class="w-full h-full object-cover">
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <h2 id="mediaTitle" class="text-lg font-bold text-white line-clamp-2">Loading...</h2>
                    <p id="mediaDescription" class="text-sm text-zinc-400 line-clamp-2 mt-2">-</p>
                </div>
                <div class="flex gap-4 text-xs text-zinc-500">
                    <span>‚è±Ô∏è <span id="mediaDuration">--:--</span></span>
                    <span>üìä <span id="mediaSize">--</span></span>
                </div>
            </div>
        </div>

        <div id="terminal" class="hidden bg-black border border-zinc-800 rounded-lg p-4 font-mono text-xs text-zinc-500 h-32 overflow-y-auto shadow-inner">
            <div class="flex items-center gap-2 border-b border-zinc-900 pb-2 mb-2">
                <div class="h-2 w-2 rounded-full bg-red-500"></div>
                <div class="h-2 w-2 rounded-full bg-yellow-500"></div>
                <div class="h-2 w-2 rounded-full bg-green-500"></div>
                <span class="ml-auto text-zinc-700">console_output.log</span>
            </div>
            <div id="logs" class="space-y-1">
                </div>
            <div class="mt-2 text-zinc-600">
                <span class="text-emerald-500">‚ûú</span> <span class="blink">_</span>
            </div>
        </div>

        <div class="pt-4 flex flex-wrap justify-center gap-6 opacity-40 hover:opacity-100 transition-opacity duration-500">
            <div class="flex items-center gap-2 grayscale hover:grayscale-0 transition duration-300 cursor-help" title="YouTube">
                <i data-lucide="youtube" class="h-5 w-5 hover:text-red-600"></i>
            </div>
            <div class="flex items-center gap-2 grayscale hover:grayscale-0 transition duration-300 cursor-help" title="Instagram">
                <i data-lucide="instagram" class="h-5 w-5 hover:text-pink-500"></i>
            </div>
            <div class="flex items-center gap-2 grayscale hover:grayscale-0 transition duration-300 cursor-help" title="Twitter / X">
                <i data-lucide="twitter" class="h-5 w-5 hover:text-white"></i>
            </div>
            <div class="flex items-center gap-2 grayscale hover:grayscale-0 transition duration-300 cursor-help" title="TikTok">
                <i data-lucide="video" class="h-5 w-5 hover:text-cyan-400"></i>
            </div>
            <div class="flex items-center gap-2 grayscale hover:grayscale-0 transition duration-300 cursor-help" title="Pinterest">
                <i data-lucide="image" class="h-5 w-5 hover:text-red-600"></i>
            </div>
        </div>

    </main>

    <footer class="fixed bottom-4 text-[10px] text-zinc-600 font-mono text-center w-full z-0">
        <p>SECURE CONNECTION ‚Ä¢ ENCRYPTED ‚Ä¢ <a href="#" class="hover:text-zinc-400 underline">GITHUB REPO</a></p>
    </footer>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫
        lucide.createIcons();

        const urlInput = document.getElementById('urlInput');
        const dlBtn = document.getElementById('dlBtn');
        const terminal = document.getElementById('terminal');
        const logs = document.getElementById('logs');
        const clearBtn = document.getElementById('clearBtn');
        const mediaCard = document.getElementById('mediaCard');
        const mediaThumbnail = document.getElementById('mediaThumbnail');
        const mediaTitle = document.getElementById('mediaTitle');
        const mediaDescription = document.getElementById('mediaDescription');
        const mediaDuration = document.getElementById('mediaDuration');
        const mediaSize = document.getElementById('mediaSize');

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫—Ä–µ—Å—Ç–∏–∫ –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç
        urlInput.addEventListener('input', (e) => {
            if(e.target.value.length > 0) clearBtn.classList.remove('hidden');
            else clearBtn.classList.add('hidden');
        });

        clearBtn.addEventListener('click', () => {
            urlInput.value = '';
            clearBtn.classList.add('hidden');
            urlInput.focus();
        });

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–æ–≤
        function addLog(text, type = 'info') {
            const div = document.createElement('div');
            const time = new Date().toLocaleTimeString('en-US', { hour12: false, hour: "numeric", minute: "numeric", second: "numeric" });
            
            let color = 'text-zinc-400';
            if(type === 'success') color = 'text-emerald-400';
            if(type === 'error') color = 'text-red-400';
            if(type === 'warn') color = 'text-yellow-400';

            div.innerHTML = `<span class="text-zinc-700">[${time}]</span> <span class="${color}">${text}</span>`;
            logs.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }

        // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ (—Å–µ–∫—É–Ω–¥—ã –≤ HH:MM:SS)
        function formatTime(seconds) {
            if (!seconds || seconds === 0) return '--:--';
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            if (hours > 0) {
                return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
        }

        // –§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
        function formatFileSize(bytes) {
            if (!bytes) return '--';
            const sizes = ['B', 'KB', 'MB', 'GB'];
            if (bytes === 0) return '0 B';
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return Math.round(bytes / Math.pow(1024, i) * 100) / 100 + ' ' + sizes[i];
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ–¥–∏–∞ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—ã–π yt-dlp —Å–µ—Ä–≤–µ—Ä
        async function fetchMediaInfo(url) {
            try {
                addLog(`Fetching media information...`);
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π yt-dlp —Å–µ—Ä–≤–µ—Ä
                const response = await fetch('/api/download', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        url: url
                    })
                });

                const data = await response.json();

                if (data.status !== 'success') {
                    throw new Error(data.error || 'Unknown error');
                }

                addLog(`Media info retrieved successfully`, 'success');
                return data;

            } catch (error) {
                addLog(`Error fetching media: ${error.message}`, 'error');
                throw error;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ (–£–î–ê–õ–ï–ù–ê - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É)

        async function startProcess() {
            const url = urlInput.value.trim();
            if (!url) {
                urlInput.classList.add('ring-2', 'ring-red-500');
                setTimeout(() => urlInput.classList.remove('ring-2', 'ring-red-500'), 500);
                return;
            }

            // UI Changes
            terminal.classList.remove('hidden');
            mediaCard.classList.add('hidden');
            logs.innerHTML = '';
            dlBtn.disabled = true;
            dlBtn.innerHTML = `<i data-lucide="loader-2" class="h-5 w-5 animate-spin"></i> Processing...`;
            lucide.createIcons();

            try {
                addLog(`Initializing download via yt-dlp...`);
                await new Promise(r => setTimeout(r, 300));
                
                addLog(`Target URL: ${url.substring(0, 40)}...`, 'warn');
                
                // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ–¥–∏–∞
                const mediaData = await fetchMediaInfo(url);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–¥–µ–æ
                if (mediaData.url) {
                    addLog(`Found direct download link`, 'success');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
                    if (mediaData.thumbnail) {
                        mediaThumbnail.src = mediaData.thumbnail;
                    }
                    
                    mediaTitle.textContent = mediaData.title || 'Media Download';
                    mediaDescription.textContent = mediaData.desc || mediaData.duration ? `Duration: ${formatTime(mediaData.duration)}` : '-';
                    
                    if (mediaData.duration) {
                        mediaDuration.textContent = formatTime(mediaData.duration);
                    }
                    
                    // –ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞–∑–º–µ—Ä (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
                    if (mediaData.filesize) {
                        mediaSize.textContent = formatFileSize(mediaData.filesize);
                    }

                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
                    mediaCard.classList.remove('hidden');

                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
                    dlBtn.disabled = false;
                    dlBtn.classList.remove('bg-white', 'text-black');
                    dlBtn.classList.add('bg-emerald-500', 'text-white', 'hover:bg-emerald-600');
                    dlBtn.innerHTML = `<i data-lucide="download" class="h-5 w-5"></i> Download Now`;
                    dlBtn.onclick = async () => {
                        dlBtn.disabled = true;
                        dlBtn.innerHTML = `<i data-lucide="loader-2" class="h-5 w-5 animate-spin"></i> Downloading...`;
                        try {
                            // –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª –ø—Ä—è–º–æ —Å —Å–µ—Ä–≤–µ—Ä–∞
                            window.location.href = mediaData.url;
                            
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö –ø–æ—Å–ª–µ –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏
                            setTimeout(() => {
                                dlBtn.disabled = false;
                                dlBtn.innerHTML = `<i data-lucide="check" class="h-5 w-5"></i> Download Complete`;
                                addLog(`File downloaded: ${mediaData.filename}`, 'success');
                            }, 2000);
                        } catch (error) {
                            addLog(`Download error: ${error.message}`, 'error');
                            dlBtn.disabled = false;
                            dlBtn.innerHTML = `<i data-lucide="download" class="h-5 w-5"></i> Download Now`;
                        }
                    };
                    lucide.createIcons();

                    addLog(`Ready to download: ${mediaData.title || 'Media'}`, 'success');

                } else {
                    throw new Error('No download link found in response');
                }

            } catch (error) {
                addLog(`Process failed: ${error.message}`, 'error');
                dlBtn.disabled = false;
                dlBtn.classList.remove('bg-emerald-500', 'text-white', 'hover:bg-emerald-600');
                dlBtn.classList.add('bg-white', 'text-black');
                dlBtn.innerHTML = `<i data-lucide="download" class="h-5 w-5"></i> Try Again`;
                dlBtn.onclick = startProcess;
                lucide.createIcons();
                
                // –ü–æ–º–æ—â—å –ø–æ –æ—à–∏–±–∫–∞–º
                if (error.message.includes('empty')) {
                    addLog(`–°–æ–≤–µ—Ç: –í–∏–¥–µ–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω–æ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –≤–∞—à–µ–º —Ä–µ–≥–∏–æ–Ω–µ.`, 'warn');
                    addLog(`–ü–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥—É—é —Å—Å—ã–ª–∫—É –∏–ª–∏ –¥—Ä—É–≥—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É`, 'warn');
                } else if (error.message.includes('403')) {
                    addLog(`–°–æ–≤–µ—Ç: API –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–∞—É–∑—É. –ü–æ–ø—Ä–æ–±—É–π —á–µ—Ä–µ–∑ 30 —Å–µ–∫.`, 'warn');
                    addLog(`–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –¥—Ä—É–≥—É—é —Å—Å—ã–ª–∫—É`, 'warn');
                } else if (error.message.includes('429')) {
                    addLog(`–°–æ–≤–µ—Ç: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã.`, 'warn');
                }
            }
        }

        // ============ –°–ò–°–¢–ï–ú–ê –õ–û–ö–ê–õ–ò–ó–ê–¶–ò–ò ============
        const translations = {
            ru: {
                'title': 'LUMINA | –ú–µ–¥–∏–∞ –¥–≤–∏–∂–æ–∫',
                'subtitle': '–î–≤–∏–∂–æ–∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –º–µ–¥–∏–∞-—ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏',
                'system_online': '–°–ò–°–¢–ï–ú–ê ONLINE',
                'paste_url': '–í—Å—Ç–∞–≤—å URL —Å YouTube, Pinterest –∏–ª–∏ TikTok...',
                'format': '–§–æ—Ä–º–∞—Ç',
                'quality': '–ö–∞—á–µ—Å—Ç–≤–æ',
                'codec': '–ö–æ–¥–µ–∫',
                'mode': '–†–µ–∂–∏–º',
                'mp4_video': 'MP4 (–í–∏–¥–µ–æ)',
                'mp3_audio': 'MP3 (–ê—É–¥–∏–æ)',
                'best_available': '–õ—É—á—à–µ–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ',
                '1080p': '1080p',
                '720p': '720p',
                '480p': '480p',
                'h264': 'h.264',
                'fast': '–ë—ã—Å—Ç—Ä–æ',
                'process': '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É',
                'initializing': '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ via yt-dlp...',
                'fetching_info': '–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –º–µ–¥–∏–∞...',
                'download_now': '–°–∫–∞—á–∞—Ç—å —Å–µ–π—á–∞—Å',
                'try_again': '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞'
            },
            en: {
                'title': 'LUMINA | Media Engine',
                'subtitle': 'Universal Media Extraction Engine',
                'system_online': 'SYSTEM ONLINE',
                'paste_url': 'Paste YouTube, Pinterest, or TikTok URL...',
                'format': 'Format',
                'quality': 'Quality',
                'codec': 'Codec',
                'mode': 'Mode',
                'mp4_video': 'MP4 (Video)',
                'mp3_audio': 'MP3 (Audio)',
                'best_available': 'Best Available',
                '1080p': '1080p',
                '720p': '720p',
                '480p': '480p',
                'h264': 'h.264',
                'fast': 'Fast',
                'process': 'Initialize Download',
                'initializing': 'Initializing download via yt-dlp...',
                'fetching_info': 'Fetching media information...',
                'download_now': 'Download Now',
                'try_again': 'Try Again'
            },
            es: {
                'title': 'LUMINA | Motor multimedia',
                'subtitle': 'Motor de extracci√≥n de medios universal',
                'system_online': 'SISTEMA ONLINE',
                'paste_url': 'Pega URL de YouTube, Pinterest o TikTok...',
                'format': 'Formato',
                'quality': 'Calidad',
                'codec': 'C√≥dec',
                'mode': 'Modo',
                'mp4_video': 'MP4 (Video)',
                'mp3_audio': 'MP3 (Audio)',
                'best_available': 'Lo mejor disponible',
                '1080p': '1080p',
                '720p': '720p',
                '480p': '480p',
                'h264': 'h.264',
                'fast': 'R√°pido',
                'process': 'Iniciar descarga',
                'initializing': 'Inicializando descarga via yt-dlp...',
                'fetching_info': 'Obteniendo informaci√≥n multimedia...',
                'download_now': 'Descargar ahora',
                'try_again': 'Intentar de nuevo'
            },
            de: {
                'title': 'LUMINA | Medien-Engine',
                'subtitle': 'Universal-Medienextraktions-Engine',
                'system_online': 'SYSTEM ONLINE',
                'paste_url': 'YouTube-, Pinterest- oder TikTok-URL einf√ºgen...',
                'format': 'Format',
                'quality': 'Qualit√§t',
                'codec': 'Codec',
                'mode': 'Modus',
                'mp4_video': 'MP4 (Video)',
                'mp3_audio': 'MP3 (Audio)',
                'best_available': 'Beste verf√ºgbar',
                '1080p': '1080p',
                '720p': '720p',
                '480p': '480p',
                'h264': 'h.264',
                'fast': 'Schnell',
                'process': 'Download initialisieren',
                'initializing': 'Download via yt-dlp wird initialisiert...',
                'fetching_info': 'Mediainformationen werden abgerufen...',
                'download_now': 'Jetzt herunterladen',
                'try_again': 'Erneut versuchen'
            },
            fr: {
                'title': 'LUMINA | Moteur multim√©dia',
                'subtitle': 'Moteur d\'extraction multim√©dia universel',
                'system_online': 'SYST√àME EN LIGNE',
                'paste_url': 'Collez l\'URL YouTube, Pinterest ou TikTok...',
                'format': 'Format',
                'quality': 'Qualit√©',
                'codec': 'Codec',
                'mode': 'Mode',
                'mp4_video': 'MP4 (Vid√©o)',
                'mp3_audio': 'MP3 (Audio)',
                'best_available': 'Meilleure disponible',
                '1080p': '1080p',
                '720p': '720p',
                '480p': '480p',
                'h264': 'h.264',
                'fast': 'Rapide',
                'process': 'Initialiser le t√©l√©chargement',
                'initializing': 'Initialisation du t√©l√©chargement via yt-dlp...',
                'fetching_info': 'R√©cup√©ration des informations m√©dias...',
                'download_now': 'T√©l√©charger maintenant',
                'try_again': 'R√©essayer'
            }
        };

        let currentLanguage = localStorage.getItem('language') || detectLanguage();

        function detectLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            const lang = browserLang.split('-')[0];
            return ['ru', 'en', 'es', 'de', 'fr'].includes(lang) ? lang : 'en';
        }

        function t(key) {
            return translations[currentLanguage][key] || translations['en'][key] || key;
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('language', lang);
            updateUI();
            document.getElementById('currentLang').textContent = lang.toUpperCase();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π —è–∑—ã–∫ –≤ –º–µ–Ω—é
            document.querySelectorAll('.lang-option').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
        }

        function updateUI() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å data-i18n –∞—Ç—Ä–∏–±—É—Ç–æ–º
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.dataset.i18n;
                el.textContent = t(key);
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.dataset.i18nPlaceholder;
                el.placeholder = t(key);
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º title
            document.title = t('title');
            document.documentElement.lang = currentLanguage;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            setLanguage(currentLanguage);

            // –°–æ–±—ã—Ç–∏—è –¥–ª—è —è–∑—ã–∫–æ–≤–æ–≥–æ –º–µ–Ω—é
            document.getElementById('langToggle').addEventListener('click', () => {
                const menu = document.getElementById('langMenu');
                menu.classList.toggle('show');
            });

            document.querySelectorAll('.lang-option').forEach(btn => {
                btn.addEventListener('click', () => {
                    setLanguage(btn.dataset.lang);
                    document.getElementById('langMenu').classList.remove('show');
                });
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ
            document.addEventListener('click', (e) => {
                const selector = document.querySelector('.lang-selector');
                if (!selector.contains(e.target)) {
                    document.getElementById('langMenu').classList.remove('show');
                }
            });
        });
    </script>
</body>
</html>